<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Dashboard ‚Äî HYMetaLab Reality Loop</title>
<style>
:root{--bg:#fafafa;--fg:#1a1a1a;--border:#e0e0e0;--card:#ffffff}
@media(prefers-color-scheme:dark){:root{--bg:#1a1a1a;--fg:#f0f0f0;--border:#333;--card:#252525}}
*{box-sizing:border-box}
body{margin:0;font:16px/1.6 -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--fg);-webkit-font-smoothing:antialiased}
header{background:var(--card);border-bottom:2px solid var(--border);padding:24px;box-shadow:0 2px 8px rgba(0,0,0,.05)}
header h1{margin:0;font-size:28px;max-width:1100px;margin:0 auto}
header a{color:#0066cc;text-decoration:none}
main{max-width:1100px;margin:0 auto;padding:32px 24px}
.status{display:inline-block;padding:6px 14px;background:#00aa00;color:#fff;border-radius:20px;font-size:14px;font-weight:600;margin-left:12px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin:32px 0}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:24px;box-shadow:0 2px 8px rgba(0,0,0,.05);transition:transform .2s}
.card:hover{transform:translateY(-4px);box-shadow:0 4px 16px rgba(0,0,0,.1)}
.card-label{font-size:14px;color:#666;margin:0 0 8px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px}
.card-value{font-size:48px;font-weight:700;margin:0;line-height:1.1}
.card-value.pass{color:#00aa00}
.card-value.warn{color:#ff8800}
.card-value.perfect{color:#0066cc}
.card-meta{font-size:13px;color:#999;margin:8px 0 0}
.section{margin:48px 0}
.section h2{font-size:24px;margin:0 0 16px;font-weight:600}
table{width:100%;border-collapse:collapse;background:var(--card);border-radius:8px;overflow:hidden}
th,td{padding:12px 16px;text-align:left;border-bottom:1px solid var(--border)}
th{background:rgba(0,0,0,.03);font-weight:600;font-size:14px}
tr:last-child td{border-bottom:none}
code{background:rgba(0,0,0,.05);padding:2px 6px;border-radius:4px;font-size:13px}
</style>
</head>
<body>
<header>
<h1>üìä MetaDashboard <span class="status">LIVE</span></h1>
<p style="margin:8px 0 0;max-width:1100px;margin:8px auto 0"><a href="index.html">‚Üê Back to Home</a></p>
</header>
<main>
<div class="section">
<h2>Validation Metrics</h2>
<div id="metrics-grid" class="grid">
<div class="card"><div>Loading...</div></div>
</div>
</div>

<div class="section">
<h2>Study Overview</h2>
<div id="overview-grid" class="grid">
<div class="card"><div>Loading...</div></div>
</div>
</div>

<div class="section">
<h2>Publication Status</h2>
<table id="publication-table">
<thead><tr><th>Item</th><th>Status</th><th>Details</th></tr></thead>
<tbody><tr><td colspan="3">Loading...</td></tr></tbody>
</table>
</div>

<div class="section">
<h2>Corpus Validation</h2>
<div id="corpus-grid" class="grid">
<div class="card"><div>Loading...</div></div>
</div>
</div>
</main>

<script>
(async()=>{
  try {
    const r=await fetch('data/MetaDashboard_v2.json');
    const data=await r.json();
    const phase4=data.phase4_open_data_integration||{};
    const val=phase4.validation||{};
    const pub=phase4.publication||{};
    const corpus=data.corpus_validation||{};

    // Metrics Grid
    const metricsHTML=`
      <div class="card">
        <div class="card-label">Guardian v4</div>
        <div class="card-value pass">${val.guardian_v4||'‚Äì'}</div>
        <div class="card-meta">Ethics & Alignment</div>
      </div>
      <div class="card">
        <div class="card-label">TruthLens</div>
        <div class="card-value perfect">${val.truthlens?.toFixed(3)||'‚Äì'}</div>
        <div class="card-meta">Truth Index</div>
      </div>
      <div class="card">
        <div class="card-label">MeaningForge</div>
        <div class="card-value perfect">${val.meaningforge?.toFixed(3)||'‚Äì'}</div>
        <div class="card-meta">Semantic Consistency</div>
      </div>
      <div class="card">
        <div class="card-label">Status</div>
        <div class="card-value" style="font-size:24px;color:#00aa00">${phase4.status||'‚Äì'}</div>
        <div class="card-meta">Phase 4 Integration</div>
      </div>
    `;
    document.getElementById('metrics-grid').innerHTML=metricsHTML;

    // Overview Grid
    const overviewHTML=`
      <div class="card">
        <div class="card-label">Datasets</div>
        <div class="card-value">${phase4.datasets||'‚Äì'}</div>
        <div class="card-meta">Standardized & Validated</div>
      </div>
      <div class="card">
        <div class="card-label">Hypotheses</div>
        <div class="card-value">${phase4.hypotheses||'‚Äì'}</div>
        <div class="card-meta">Generated</div>
      </div>
      <div class="card">
        <div class="card-label">Predictions</div>
        <div class="card-value">${phase4.predictions||'‚Äì'}</div>
        <div class="card-meta">Testable</div>
      </div>
      <div class="card">
        <div class="card-label">Package Size</div>
        <div class="card-value" style="font-size:32px">${phase4.replication_package?.size_mb||'‚Äì'}<span style="font-size:20px">MB</span></div>
        <div class="card-meta">Replication ZIP</div>
      </div>
    `;
    document.getElementById('overview-grid').innerHTML=overviewHTML;

    // Publication Table
    const pubHTML=`
      <tr><td>Zenodo DOI</td><td><span class="status">‚úÖ ${pub.upload_status||'PENDING'}</span></td><td><code>${pub.zenodo_doi||'Pending'}</code></td></tr>
      <tr><td>Preprint</td><td><span style="color:#ff8800">‚è≥ ${pub.preprint_status||'PENDING'}</span></td><td>${pub.preprint_doi||'Pending submission'}</td></tr>
      <tr><td>Upload Date</td><td><span class="status">‚úÖ COMPLETE</span></td><td>${pub.upload_date||'‚Äì'}</td></tr>
      <tr><td>Replication Verified</td><td><span class="status">‚úÖ ${phase4.replication_package?.verified?'YES':'NO'}</span></td><td>SHA256: ${phase4.replication_package?.sha256?.substring(0,16)||'‚Äì'}...</td></tr>
    `;
    document.getElementById('publication-table').querySelector('tbody').innerHTML=pubHTML;

    // Corpus Grid
    const corpusHTML=`
      <div class="card">
        <div class="card-label">Documents Scanned</div>
        <div class="card-value">${corpus.documents_scanned||'‚Äì'}</div>
        <div class="card-meta">Total Corpus</div>
      </div>
      <div class="card">
        <div class="card-label">Mean Score</div>
        <div class="card-value warn">${corpus.mean_score||'‚Äì'}</div>
        <div class="card-meta">Average Guardian</div>
      </div>
      <div class="card">
        <div class="card-label">Passing Rate</div>
        <div class="card-value warn">${corpus.passing_rate||'‚Äì'}%</div>
        <div class="card-meta">‚â•70 Threshold</div>
      </div>
      <div class="card">
        <div class="card-label">Top Performer</div>
        <div class="card-value perfect" style="font-size:28px">${corpus.top_performer?.score||'‚Äì'}</div>
        <div class="card-meta">${corpus.top_performer?.file||'‚Äì'}</div>
      </div>
    `;
    document.getElementById('corpus-grid').innerHTML=corpusHTML;

  } catch(e) {
    document.getElementById('metrics-grid').innerHTML=`<div class="card"><div>Error loading data: ${e.message}</div></div>`;
  }
})();
</script>
</body>
</html>
